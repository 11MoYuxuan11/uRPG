# 系统设计文档目录结构

## 场景设计 screens

游戏中的场景分为以下三个：

- login     ：登录场景
- select    ：选人场景
- main      ：主场景

## 关卡设计 map

场景和关卡是有区别的，关卡被包含在主场景中
每一张地图都是一个独立的关卡，可以通过UE4的关卡流实现无缝大地图
每一个副本也是一个独立的关卡
每一个关卡是一个文件夹，其中可以拆分成多个子关卡设计文档方便细化设定

## 剧情设计 scenarios

不同于世界观设定，主要是游戏内任务设定
是否需要调用即时演算动画或CG动画等
主要是任务系统的内容设定
以关卡作为单元，拆分成不同的文件夹

## 界面设计widgets

界面被拆分成无数个widgets（部件）单独设计
比如人物生命值进度条是一个独立的widgets
角色背包也是一个单独的widgets
widgets之间是可以相互嵌套的
root级别的widgets就是一个完整的界面，游戏中只有一个主界面：UMG_main

## 实体设计 entitas

游戏中所有玩家可交互的对象都是实体，类比于UE4中的Actor
component组件：实体拥有的能力
stategraphs状态图：实体的动画姿态变化
brains大脑：实体的Ai行为树
实体将以上部件整合在一起，并根据配置将这些数据整合

## 组件设计 component

游戏中最重要的组成部分
对实体entity能力的抽象
涌现式游戏设计最主要的组成部分。抽象规则最小单元

## 状态图设计 stategraphs

可以理解为状态机，状态机有三个回调时机，分别是：

- 进入状态
- tick（每一帧）
- 退出状态

状态图中的状态是难以服用的，因此不拆分成两部分
但是不同entity是可以使用一套状态机的
状态图通过事件通信的方式告诉entity状态变化
由entity自行决定状态变化产生的表现

## 大脑设计 brains

大脑就是AI行为树，用于智慧实体（一些NPC）
行为树是若干个行为节点组成的树状图，包括控制节点和行为节点
控制节点包括：

- 选择：选择其子节点中的某个执行（权重随机）
- 序列：依次执行所有子节点，就是说当前一个返回【完成】状态后，再运行先一个子节点
- 并行： 将其所有子节点都运行一遍（同时）

选择节点需要**前提**，就是满足进入节点的条件

## 行为设计 behaviours

用于brains，将行为抽象出来方便复用
行为通常是改变entity状态或者修改component属性、调用component方法
